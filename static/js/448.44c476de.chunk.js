"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[448],{5448:function(e,n,r){r.r(n),r.d(n,{default:function(){return J}});var t,a=r(9434),i=r(2791),o=r(3634),s=r(9439),d=r(6916),l=function(e){return e.contacts.items},c=function(e){return e.filter.value},u=function(e){return e.contacts.isLoading},h=function(e){return e.contacts.error},m=(0,d.P1)([l,c],(function(e,n){return e.filter((function(e){return e.name.toLocaleLowerCase().includes(n.toLocaleLowerCase())}))})),x=r(5705),f=r(2797),p=f.Ry().shape({name:f.Z_().matches(/^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$/,"invalid name format").required(),number:f.Z_().matches(/^\+?\d{1,4}?[-.\s]?\(?\d{1,3}?\)?[-.\s]?\d{1,4}[-.\s]?\d{1,4}[-.\s]?\d{1,9}?$/,"invalid phone number format").required()}),g=r(5218),b=r(1614),Z=r(4554),j=r(1889),v=r(722),w=r(3227),y=r(3329),C=function(){var e=(0,a.I0)(),n=(0,a.v9)(l),r=(0,i.useState)(!1),t=(0,s.Z)(r,2),d=t[0],c=t[1],u=(0,x.TA)({initialValues:{name:"",number:""},validationSchema:p,onSubmit:function(r,t){var a=r.name,i=r.number,s=t.resetForm;return n.some((function(e){return e.name.toLowerCase()===a.trim().toLowerCase()}))?g.ZP.error("".concat(a," is already in contacts.")):n.some((function(e){return e.number===i.trim()}))?g.ZP.error("".concat(i," is already in contacts.")):(c(!0),void e((0,o.uK)({name:a,number:i})).unwrap().then((function(){g.ZP.success("Contact added!"),s(),c(!1)})).catch((function(){return g.ZP.error("Something went wrong...Try reloading the page")})))}});return(0,y.jsx)(b.Z,{component:"main",maxWidth:"xs",children:(0,y.jsx)(Z.Z,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:(0,y.jsxs)("form",{autoComplete:"off",onSubmit:u.handleSubmit,children:[(0,y.jsxs)(j.ZP,{container:!0,spacing:4,children:[(0,y.jsx)(j.ZP,{item:!0,xs:12,children:(0,y.jsx)(v.Z,{type:"text",name:"name",required:!0,fullWidth:!0,id:"name",value:u.values.name,label:"Name",onChange:u.handleChange,error:u.touched.name&&Boolean(u.errors.name),helperText:u.touched.name&&u.errors.name})}),(0,y.jsx)(j.ZP,{item:!0,xs:12,children:(0,y.jsx)(v.Z,{type:"tel",name:"number",required:!0,fullWidth:!0,id:"number",value:u.values.number,label:"Number",onChange:u.handleChange,error:u.touched.number&&Boolean(u.errors.number),helperText:u.touched.number&&u.errors.number})})]}),(0,y.jsx)(w.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},loading:d,children:"Add contact"})]})})})},P=r(5243),S=r(168),T=r(7691).ZP.div(t||(t=(0,S.Z)(["\n  display: flex;\n  justify-content: center;\n"]))),k=function(){return(0,y.jsx)(T,{children:(0,y.jsx)(P.iT,{height:14,width:14,color:"#000000",visible:!0,ariaLabel:"oval-loading",secondaryColor:"#979191",strokeWidth:2,strokeWidthSecondary:2})})},W=r(15),L={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"100%",sm:"400px"},bgcolor:"background.paper",borderRadius:"6px",boxShadow:24,p:6},_=function(e){var n=e.isOpen,r=e.handleClose,t=e.id,i=e.name,s=e.number,d=(0,a.I0)(),l=(0,a.v9)(u),c=(0,x.TA)({initialValues:{id:t,name:i,number:s},validationSchema:p,onSubmit:function(e,n){var t=n.resetForm;i.trim().toLowerCase()!==e.name.trim().toLowerCase()||s!==e.number?d((0,o.Tk)(e)).unwrap().then((function(){g.ZP.success("Contact edited!"),t(),r()})).catch((function(){return g.ZP.error("Something went wrong...Try reloading the page")})):g.ZP.error("The same values")}});return(0,y.jsx)(W.Z,{open:n,onClose:r,"aria-labelledby":"modal-edit-contact","aria-describedby":"modal-edit-contact",children:(0,y.jsx)(Z.Z,{sx:L,children:(0,y.jsxs)("form",{autoComplete:"off",onSubmit:c.handleSubmit,children:[(0,y.jsxs)(j.ZP,{container:!0,spacing:4,children:[(0,y.jsx)(j.ZP,{item:!0,xs:12,children:(0,y.jsx)(v.Z,{type:"text",name:"name",required:!0,fullWidth:!0,id:"name",value:c.values.name,label:"Name",onChange:c.handleChange,error:c.touched.name&&Boolean(c.errors.name),helperText:c.touched.name&&c.errors.name})}),(0,y.jsx)(j.ZP,{item:!0,xs:12,children:(0,y.jsx)(v.Z,{type:"tel",name:"number",required:!0,fullWidth:!0,id:"number",value:c.values.number,label:"Number",onChange:c.handleChange,error:c.touched.number&&Boolean(c.errors.number),helperText:c.touched.number&&c.errors.number})})]}),(0,y.jsx)(w.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},loading:l,children:"Edit contact"})]})})})},I=r(6535),q=r(653),F=r(3044),A=r(6259),D=r(6112),N=r(3400),z=r(9332),B=r(7247),R=r(1286),E=function(e){var n=e.contact,r=n.id,t=n.name,d=n.number,l=(0,i.useState)(!1),c=(0,s.Z)(l,2),u=c[0],h=c[1],m=(0,i.useState)(!1),x=(0,s.Z)(m,2),f=x[0],p=x[1],b=(0,a.I0)();return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(I.ZP,{sx:{backgroundColor:"rgba(152, 174, 194, 0.16)",borderRadius:"4px",boxShadow:4},children:[(0,y.jsx)(q.Z,{children:(0,y.jsx)(F.Z,{sx:{color:"#1976d2",backgroundColor:"transparent"},children:(0,y.jsx)(z.Z,{sx:{width:"30px",height:"30px"}})})}),(0,y.jsx)(A.Z,{primary:t,secondary:d}),(0,y.jsxs)(D.Z,{sx:{display:"flex",flexDirection:"row",gap:"16px"},children:[(0,y.jsx)(N.Z,{edge:"end","aria-label":"edit",sx:{"&:hover":{color:"#1976d2"},"&:focus":{color:"#1976d2"}},onClick:function(){return p(!0)},children:(0,y.jsx)(R.Z,{})}),(0,y.jsx)(N.Z,{edge:"end","aria-label":"delete",sx:{"&:hover":{color:"#1976d2"},"&:focus":{color:"#1976d2"}},onClick:function(){h(!0),b((0,o.GK)(r)).unwrap().then((function(){g.ZP.success("Contact deleted!"),h(!1)})).catch((function(){return g.ZP.error("Something went wrong...Try reloading the page")}))},children:u?(0,y.jsx)(k,{}):(0,y.jsx)(B.Z,{})})]})]}),f&&(0,y.jsx)(_,{isOpen:f,handleClose:function(){return p(!1)},id:r,name:t,number:d})]})},G=r(493),K=r(890),O=function(){var e=(0,a.v9)(m);return(0,y.jsx)(Z.Z,{sx:{flexGrow:1,maxWidth:"700px",m:"0 auto"},children:(0,y.jsxs)(G.Z,{sx:{display:"flex",flexDirection:"column",gap:"10px",p:"0"},children:[0===e.length&&(0,y.jsx)(K.Z,{sx:{m:"0 auto"},variant:"h6",component:"div",children:"No contacts for your request ..."}),e.map((function(e){return(0,y.jsx)(E,{contact:e},e.id)}))]})})},V=r(4808),$=function(){var e=(0,a.I0)(),n=(0,a.v9)(c);return(0,y.jsx)(b.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mt:"20px",mb:"20px"},children:(0,y.jsx)(v.Z,{fullWidth:!0,type:"text",label:"Find contacts by name",value:n,variant:"outlined",size:"normal",sx:{maxWidth:"700px"},onChange:function(n){e((0,V.T)(n.currentTarget.value.trim()))}})})},Y=r(4270),H=r(7047);function J(){var e=(0,a.I0)(),n=(0,a.v9)(l),r=(0,a.v9)(u),t=(0,a.v9)(h);return(0,i.useEffect)((function(){e((0,o.yF)())}),[e]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(Y.q,{children:(0,y.jsx)("title",{children:"Your contacts"})}),r?(0,y.jsxs)(Z.Z,{sx:{display:"flex",flexDirection:"column",gap:4,alignItems:"center",marginTop:"60px"},children:[(0,y.jsx)(H.Z,{variant:"rounded",width:400,height:60}),(0,y.jsx)(H.Z,{variant:"rounded",width:400,height:60}),(0,y.jsx)(H.Z,{variant:"rounded",width:400,height:40}),(0,y.jsx)(H.Z,{variant:"rounded",width:700,height:60}),(0,y.jsx)(H.Z,{variant:"rounded",width:700,height:60}),(0,y.jsx)(H.Z,{variant:"rounded",width:700,height:60}),(0,y.jsx)(H.Z,{variant:"rounded",width:700,height:60})]}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(C,{}),(0,y.jsx)($,{}),t&&(0,y.jsx)(Z.Z,{sx:{display:"flex",justifyContent:"center",mb:4},children:(0,y.jsx)(K.Z,{variant:"h6",component:"div",children:"Something went wrong...Try reloading the page"})}),n.length>0&&!t?(0,y.jsx)(O,{}):(0,y.jsxs)(Z.Z,{sx:{display:"flex",flexDirection:"column",gap:4,alignItems:"center"},children:[(0,y.jsx)(H.Z,{variant:"rounded",width:700,height:60}),(0,y.jsx)(H.Z,{variant:"rounded",width:700,height:60}),(0,y.jsx)(H.Z,{variant:"rounded",width:700,height:60})]}),";"]})]})}}}]);
//# sourceMappingURL=448.44c476de.chunk.js.map